<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Example</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Preload first 2 images -->
    <link rel="preload" as="image" href="photos/breathe/breathe-1.jpg">
    <link rel="preload" as="image" href="photos/breathe/breathe-2.jpg">
    <style>
        * {
            box-sizing: border-box;
        }

        .column {
            float: left;
            width: 100%;
            padding: 7px;
            position: relative;
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
            min-height: 200px;
            overflow: hidden;
        }
        
        /* Skeleton loading animation */
        .column::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.4),
                transparent
            );
            animation: shimmer 1.5s infinite;
            z-index: 1;
        }
        
        .column.loaded::before {
            display: none;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .column img {
            width: 100%;
            height: auto;
            display: block;
            cursor: zoom-in;
            opacity: 0;
            filter: blur(10px);
            transition: opacity 0.5s ease, filter 0.5s ease;
            transform: scale(1.05);
        }
        
        .column img.loaded {
            opacity: 1;
            filter: blur(0);
            transform: scale(1);
        }

        /* Clearfix (clear floats) */
        .row::after {
            content: "";
            clear: both;
            display: table;
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        const column = img.closest('.column');
                        
                        if (img.dataset.src) {
                            img.src = img.dataset.src;
                            img.removeAttribute('data-src');
                        }
                        
                        img.addEventListener('load', function() {
                            img.classList.add('loaded');
                            if (column) column.classList.add('loaded');
                        });
                        
                        if (img.complete && img.naturalHeight !== 0) {
                            img.classList.add('loaded');
                            if (column) column.classList.add('loaded');
                        }
                        
                        observer.unobserve(img);
                    }
                });
            }, {
                rootMargin: '100px 0px',
                threshold: 0.01
            });
            
            document.querySelectorAll('.column img[data-src]').forEach(img => {
                imageObserver.observe(img);
            });
            
            document.querySelectorAll('.column img:not([data-src])').forEach(img => {
                const column = img.closest('.column');
                img.addEventListener('load', function() {
                    img.classList.add('loaded');
                    if (column) column.classList.add('loaded');
                });
                if (img.complete && img.naturalHeight !== 0) {
                    img.classList.add('loaded');
                    if (column) column.classList.add('loaded');
                }
            });
        });
    </script>
</head>
<body>
    <div id="header-div"></div>
    <div id="sidebar-div"></div>

    <main id="main">
        <!-- ======= Breadcrumbs ======= -->
        <section id="breadcrumbs" class="breadcrumbs">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center">
                    <h2>breathe</h2>
                    <ol>
                        <li><a href="index.html">Home</a></li>
                        <li>breathe</li>
                    </ol>
                </div>
            </div>
        </section><!-- End Breadcrumbs -->

        <!-- ======= Portfolio Details Section ======= -->
        <div class="container">
            <div class="row">
                <div class="column">
                    <img src="photos/breathe/breathe-1.jpg" alt="Breathe 1">
                </div>
                <div class="column">
                    <img src="photos/breathe/breathe-2.jpg" alt="Breathe 2">
                </div>
                <div class="column">
                    <img data-src="photos/breathe/breathe-3.jpg" alt="Breathe 3">
                </div>
                <div class="column">
                    <img data-src="photos/breathe/breathe-4.jpg" alt="Breathe 4">
                </div>
                <div class="column">
                    <img data-src="photos/breathe/breathe-5.jpg" alt="Breathe 5">
                </div>
                <div class="column">
                    <img data-src="photos/breathe/breathe-6.jpg" alt="Breathe 6">
                </div>
                <div class="column">
                    <img data-src="photos/breathe/breathe-7.jpg" alt="Breathe 7">
                </div>
                <div class="column">
                    <img data-src="photos/breathe/breathe-8.jpg" alt="Breathe 8">
                </div>
            </div>
        </div>
        <!-- End Portfolio Details Section -->
    </main><!-- End #main -->

    <!-- ======= Footer ======= -->
    <footer id="footer">
        <div class="container">
            <div class="copyright">
            </div>
            <div class="credits">
            </div>
        </div>
    </footer><!-- End Footer -->

    <a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/jquery/jquery.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>
    <script src="assets/vendor/waypoints/jquery.waypoints.min.js"></script>
    <script src="assets/vendor/counterup/counterup.min.js"></script>
    <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="assets/vendor/venobox/venobox.min.js"></script>
    <script src="assets/vendor/owl.carousel/owl.carousel.min.js"></script>
    <script src="assets/vendor/typed.js/typed.min.js"></script>
    <script src="assets/vendor/aos/aos.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>

    <script>
        fetch('sidebar.html')
        .then(response => response.text())
        .then(data => document.getElementById('sidebar-div').innerHTML = data);
        fetch('header.html')
        .then(response => response.text())
        .then(data => document.getElementById('header-div').innerHTML = data);
    </script>
</body>
</html>
